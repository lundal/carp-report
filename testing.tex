\todo{something about testing the com unit}

\todo{8x8, 8x8x8 matrices}

\todo{something about testbench}

Testing uncovered many bugs within the design

\subsection{Fixed bugs}

\emph{States and types were written to the wrong location.}
When writing single states or types, a half-row is read from BRAM, combined with the new data, and written back to BRAM.
Due to the usage of non-implementable code to specify how the data should be combined, the new data always ended up in the middle of the half-row.

\emph{Development ran indefinitely.}
Comparison of signals of different widths always return false.
Due to the comparison of a parameterized signal with a constant, the development unit would not iterate through the cells, and thus never finish.

\emph{WriteRule did not follow spesification.}
When the api transformed a 3D rule struct into an instruction, the position of up/down and north/south were swapped.

\emph{PrintTypes used wrong offsets for decomposition.}
When decomposing a row of types into individual types, an offset of 5 was used instead of 8.
This entailed that the printed values were completely wrong.

\emph{ReadVector and PrintVector used 32-bit words.}
The functions were not updated from using 32-bit to 64-bit words.
ReadVector would therefore expect twice the number of words provided by the hardware platform, causing the program to wait for nonexistant data.

\subsection{Remaining bugs}

\begin{itemize}
    \item ReadStates prints garbage in top 32 bits (but they are discarded by api)
    \item WriteStates writes two rows, then on the next layer, and only uses least significant 32 bits. Intended behavior? (sim only)
    \item ReadRuleVector sends an extra word the first time, every word thereafter is offset by one
    \item ReadUsedRules does not work when width = 8 (simulator crashes: ERROR: Index 63 out of bound 31 downto 0). Prints all zeroes on board
    \item Development stores previous state/type to bram. Rules does not get triggered. Are they written?
    \item Config does not store states to sblocks properly. Signal fluctuates.
\end{itemize}

\todo{list -> text}

\subsection{Instructions}

\begin{table}[!ht]
    \renewcommand{\arraystretch}{1.3}
    \caption{Implementational status of instructions}
    \label{tab:instructions}
    \centering
    \begin{tabular}{l|l|l}
        \bfseries Instruction & \bfseries Works in 2D & \bfseries Works in 3D \\
        \hline
        break & Yes & Yes \\
        clearBRAM & Yes & Yes \\
        config & Yes & Undecidable \\
        devstep & Undecidable & Undecidable \\
        doFitness & Undecidable & Undecidable \\
        end & Yes & Yes \\
        jump & Yes & Yes \\
        jumpEqual & Yes & Yes \\
        nop & Yes & Yes \\
        readback & Yes & Undecidable \\
        readFitness & Undecidable & Undecidable \\
        readRuleVector & No & No \\
        readState & Yes & Yes \\
        readStates & Yes & Yes \\
        readSums & Undecidable & Undecidable \\
        readType & Yes & Yes \\
        readTypes & Yes & Yes \\
        readUsedRules & Undecidable & No \\
        resetDevCounter & Yes & Yes \\
        run & Undecidable & Undecidable \\
        setNumberOfLastRule & Undecidable & Undecidable \\
        startDFT & Undecidable & Undecidable \\
        store & Yes & Yes \\
        switch & Yes & Yes \\
        writeLUTConv & Undecidable & Undecidable \\
        writeRule & Undecidable & Undecidable \\
        writeState & Yes & Yes \\
        writeStates & Yes & No \\
        writeType & Yes & Yes \\
        writeTypes & Yes & No \\
    \end{tabular}
\end{table}

